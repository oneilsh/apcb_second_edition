<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 32 R Functions | A Primer for Computational Biology (2nd Edition)</title>
  <meta name="description" content="Chapter 32 R Functions | A Primer for Computational Biology (2nd Edition)" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 32 R Functions | A Primer for Computational Biology (2nd Edition)" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 32 R Functions | A Primer for Computational Biology (2nd Edition)" />
  
  
  

<meta name="author" content="Shawn T. O’Neil, Matthew Peterson, Leslie Coonrod" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>
<link rel="next" href="lists-and-attributes.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="packages/prism/prism.js"></script>

<script>
  Prism.plugins.NormalizeWhitespace.setDefaults({
	'remove-trailing': false,
	'remove-indent': false,
	'left-trim': true,
	'right-trim': true,
	'remove-initial-line-feed': true,
	/*'break-lines': 80*/

	/*'break-lines': 80,
	'indent': 2,
	'remove-initial-line-feed': false,
	'tabs-to-spaces': 4,
	'spaces-to-tabs': 4*/
});
</script>

<link rel="stylesheet" href="packages/prism/prism.css">

<style>
.book .book-body .page-wrapper .page-inner section.normal pre {
  background: #fafafa;
}

.book .book-body .page-wrapper .page-inner section.normal pre>code {
  display: block;
}

.book .book-body .page-wrapper .page-inner section.normal pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3em;
    counter-reset: linenumber;
}

.line-highlight {
  margin-top: 0.7em;
}

.temporary {
  background: none; /*linear-gradient(to right, rgba(100, 150, 180, .5) 70%, rgba(100, 150, 180, 0)); */
}

.book .book-body .page-wrapper .page-inner section.normal h6 {
  margin-top: 0;
  margin-bottom: 0;
}

.command-line-prompt {
  margin-right: 0.2em;
  border-right: none;
}

.callout-box,.exercises {
  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;
  border-radius: 4px;
  margin: 25px 10px 10px 10px;
  padding: 10px;
}

.book .book-body .page-wrapper .page-inner section.normal .callout-box h4 {
  margin-top: 0;
}

.book .book-body .page-wrapper .page-inner section.normal .exercises h4 {
  margin-top: 0;
  color: #960018;
}


.fig.center {
  margin: 0 auto;
  display: block;
}

.fig.left {
  display: inline-block;
  float: left;
}

.fig.right {
  display: inline-block;
  float: right;
}

.fig>p.caption {
  color: #AAAAAA;
  text-align: left;
}

</style>





<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><b>A Primer for Computational Biology <br />(2nd Edition)</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-few-goals"><i class="fa fa-check"></i>A Few Goals</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#organization"><i class="fa fa-check"></i>Organization</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#availability"><i class="fa fa-check"></i>Availability</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="dedication.html"><a href="dedication.html"><i class="fa fa-check"></i>Dedication</a></li>
<li class="part"><span><b>Part 1: The UNIX/Linux Command-Line</b></span></li>
<li class="chapter" data-level="1" data-path="context.html"><a href="context.html"><i class="fa fa-check"></i><b>1</b> Context</a>
<ul>
<li class="chapter" data-level="" data-path="context.html"><a href="context.html#command-lines-and-operating-systems"><i class="fa fa-check"></i>Command Lines and Operating Systems</a></li>
<li class="chapter" data-level="" data-path="context.html"><a href="context.html#a-brief-history"><i class="fa fa-check"></i>A Brief History</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="logging-in.html"><a href="logging-in.html"><i class="fa fa-check"></i><b>2</b> Logging In</a>
<ul>
<li class="chapter" data-level="" data-path="logging-in.html"><a href="logging-in.html#ssh-secure-shell"><i class="fa fa-check"></i>SSH: Secure Shell</a></li>
<li class="chapter" data-level="" data-path="logging-in.html"><a href="logging-in.html#command-line-access-with-cyverse-atmosphere"><i class="fa fa-check"></i>Command-Line Access with CyVerse Atmosphere</a></li>
<li class="chapter" data-level="" data-path="logging-in.html"><a href="logging-in.html#logging-out"><i class="fa fa-check"></i>Logging Out</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html"><i class="fa fa-check"></i><b>3</b> The Command Line and Filesystem</a>
<ul>
<li class="chapter" data-level="" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html#setting-environment-variables-dealing-with-spaces"><i class="fa fa-check"></i>Setting Environment Variables, Dealing with Spaces</a></li>
<li class="chapter" data-level="" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html#alternative-shells"><i class="fa fa-check"></i>Alternative Shells</a></li>
<li class="chapter" data-level="" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html#files-directories-and-paths"><i class="fa fa-check"></i>Files, Directories, and Paths</a></li>
<li class="chapter" data-level="" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html#getting-around-the-filesystem"><i class="fa fa-check"></i>Getting around the Filesystem</a></li>
<li class="chapter" data-level="" data-path="the-command-line-and-filesystem.html"><a href="the-command-line-and-filesystem.html#relative-paths-hidden-files-and-directories"><i class="fa fa-check"></i>Relative Paths, Hidden Files, and Directories</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html"><i class="fa fa-check"></i><b>4</b> Working with Files and Directories</a>
<ul>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#viewing-the-contents-of-a-text-file"><i class="fa fa-check"></i>Viewing the Contents of a (Text) File</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#creating-new-directories"><i class="fa fa-check"></i>Creating New Directories</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#move-or-rename-a-file-or-directory"><i class="fa fa-check"></i>Move or Rename a File or Directory</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#copy-a-file-or-directory"><i class="fa fa-check"></i>Copy a File or Directory</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#remove-delete-a-file-or-directory"><i class="fa fa-check"></i>Remove (Delete) a File or Directory</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#checking-the-size-of-a-file-or-directory"><i class="fa fa-check"></i>Checking the Size of a File or Directory</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#editing-a-text-file"><i class="fa fa-check"></i>Editing a (Text) File</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#command-line-efficiency"><i class="fa fa-check"></i>Command-Line Efficiency</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#getting-help-on-a-command-or-program"><i class="fa fa-check"></i>Getting Help on a Command or Program</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#viewing-the-top-running-programs"><i class="fa fa-check"></i>Viewing the Top Running Programs</a></li>
<li class="chapter" data-level="" data-path="working-with-files-and-directories.html"><a href="working-with-files-and-directories.html#killing-rogue-programs"><i class="fa fa-check"></i>Killing Rogue Programs</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="permissions-and-executables.html"><a href="permissions-and-executables.html"><i class="fa fa-check"></i><b>5</b> Permissions and Executables</a>
<ul>
<li class="chapter" data-level="" data-path="permissions-and-executables.html"><a href="permissions-and-executables.html#executables-and-path"><i class="fa fa-check"></i>Executables and $PATH</a></li>
<li class="chapter" data-level="" data-path="permissions-and-executables.html"><a href="permissions-and-executables.html#making-files-executable"><i class="fa fa-check"></i>Making Files Executable</a></li>
<li class="chapter" data-level="" data-path="permissions-and-executables.html"><a href="permissions-and-executables.html#installing-a-program"><i class="fa fa-check"></i>Installing a Program</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html"><i class="fa fa-check"></i><b>6</b> Installing (Bioinformatics) Software</a>
<ul>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#using-a-package-manager"><i class="fa fa-check"></i>Using a Package Manager</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#installing-software-without-a-package-manager"><i class="fa fa-check"></i>Installing Software without a Package Manager</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#source-or-binary"><i class="fa fa-check"></i>Source or Binary?</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#downloading-and-unpacking"><i class="fa fa-check"></i>Downloading and Unpacking</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#other-download-and-compression-methods"><i class="fa fa-check"></i>Other Download and Compression Methods</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#compiling-the-source"><i class="fa fa-check"></i>Compiling the Source</a></li>
<li class="chapter" data-level="" data-path="installing-bioinformatics-software.html"><a href="installing-bioinformatics-software.html#installation-from-binaries"><i class="fa fa-check"></i>Installation from Binaries</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="using-bioinformatics-software.html"><a href="using-bioinformatics-software.html"><i class="fa fa-check"></i><b>7</b> Using (Bioinformatics) Software</a>
<ul>
<li class="chapter" data-level="" data-path="using-bioinformatics-software.html"><a href="using-bioinformatics-software.html#getting-data"><i class="fa fa-check"></i>Getting Data</a></li>
<li class="chapter" data-level="" data-path="using-bioinformatics-software.html"><a href="using-bioinformatics-software.html#putting-it-all-together"><i class="fa fa-check"></i>Putting It All Together</a></li>
<li class="chapter" data-level="" data-path="using-bioinformatics-software.html"><a href="using-bioinformatics-software.html#reproducibility-with-scripts"><i class="fa fa-check"></i>Reproducibility with Scripts</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="command-line-blast.html"><a href="command-line-blast.html"><i class="fa fa-check"></i><b>8</b> Command Line BLAST</a>
<ul>
<li class="chapter" data-level="" data-path="command-line-blast.html"><a href="command-line-blast.html#blast-types"><i class="fa fa-check"></i>BLAST Types</a></li>
<li class="chapter" data-level="" data-path="command-line-blast.html"><a href="command-line-blast.html#blast-databases"><i class="fa fa-check"></i>BLAST Databases</a></li>
<li class="chapter" data-level="" data-path="command-line-blast.html"><a href="command-line-blast.html#running-a-self-blast"><i class="fa fa-check"></i>Running a Self-BLAST</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="the-standard-streams.html"><a href="the-standard-streams.html"><i class="fa fa-check"></i><b>9</b> The Standard Streams</a>
<ul>
<li class="chapter" data-level="" data-path="the-standard-streams.html"><a href="the-standard-streams.html#filtering-lines-standard-input"><i class="fa fa-check"></i>Filtering Lines, Standard Input</a></li>
<li class="chapter" data-level="" data-path="the-standard-streams.html"><a href="the-standard-streams.html#counting-simple-at-repeats"><i class="fa fa-check"></i>Counting Simple AT Repeats</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sorting-first-and-last-lines.html"><a href="sorting-first-and-last-lines.html"><i class="fa fa-check"></i><b>10</b> Sorting, First and Last Lines</a>
<ul>
<li class="chapter" data-level="" data-path="sorting-first-and-last-lines.html"><a href="sorting-first-and-last-lines.html#first-and-last-lines"><i class="fa fa-check"></i>First and Last Lines</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="rows-and-columns.html"><a href="rows-and-columns.html"><i class="fa fa-check"></i><b>11</b> Rows and columns</a>
<ul>
<li class="chapter" data-level="" data-path="rows-and-columns.html"><a href="rows-and-columns.html#basic-syntax-for-awk"><i class="fa fa-check"></i>Basic Syntax for awk</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="patterns-regular-expressions.html"><a href="patterns-regular-expressions.html"><i class="fa fa-check"></i><b>12</b> Patterns (Regular Expressions)</a>
<ul>
<li class="chapter" data-level="" data-path="patterns-regular-expressions.html"><a href="patterns-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i>Regular Expressions</a></li>
<li class="chapter" data-level="" data-path="patterns-regular-expressions.html"><a href="patterns-regular-expressions.html#character-classes-and-regular-expressions-in-other-tools"><i class="fa fa-check"></i>Character Classes and Regular Expressions in Other Tools</a></li>
<li class="chapter" data-level="" data-path="patterns-regular-expressions.html"><a href="patterns-regular-expressions.html#back-referencing"><i class="fa fa-check"></i>Back-Referencing</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="miscellanea.html"><a href="miscellanea.html"><i class="fa fa-check"></i><b>13</b> Miscellanea</a>
<ul>
<li class="chapter" data-level="" data-path="miscellanea.html"><a href="miscellanea.html#manipulating-line-breaks"><i class="fa fa-check"></i>Manipulating Line Breaks</a></li>
<li class="chapter" data-level="" data-path="miscellanea.html"><a href="miscellanea.html#joining-files-on-a-common-column-and-related-rowcolumn-tasks"><i class="fa fa-check"></i>Joining Files on a Common Column (and Related Row/Column Tasks)</a></li>
<li class="chapter" data-level="" data-path="miscellanea.html"><a href="miscellanea.html#counting-duplicate-lines"><i class="fa fa-check"></i>Counting Duplicate Lines</a></li>
<li class="chapter" data-level="" data-path="miscellanea.html"><a href="miscellanea.html#for-loops-in-bash"><i class="fa fa-check"></i>For-Loops in bash</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i><b>14</b> Version Control with git</a>
<ul>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#configuring-git"><i class="fa fa-check"></i>Configuring <code>git</code></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#initializing-a-repo"><i class="fa fa-check"></i>Initializing a Repo</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#viewing-changes-bewteen-commits"><i class="fa fa-check"></i>Viewing changes bewteen commits</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#keep-files-untracked-with-.gitignore"><i class="fa fa-check"></i>Keep files untracked with <code>.gitignore</code></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#branching"><i class="fa fa-check"></i>Branching</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#remote-repos"><i class="fa fa-check"></i>Remote Repos</a></li>
</ul></li>
<li class="part"><span><b>Part 2: Programming in Python</b></span></li>
<li class="chapter" data-level="15" data-path="hello-world.html"><a href="hello-world.html"><i class="fa fa-check"></i><b>15</b> Hello, World</a>
<ul>
<li class="chapter" data-level="" data-path="hello-world.html"><a href="hello-world.html#hello-world-1"><i class="fa fa-check"></i>Hello, World</a></li>
<li class="chapter" data-level="" data-path="hello-world.html"><a href="hello-world.html#making-the-file-executable"><i class="fa fa-check"></i>Making the File Executable</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="elementary-data-types.html"><a href="elementary-data-types.html"><i class="fa fa-check"></i><b>16</b> Elementary Data Types</a>
<ul>
<li class="chapter" data-level="" data-path="elementary-data-types.html"><a href="elementary-data-types.html#integers-and-floats"><i class="fa fa-check"></i>Integers and Floats</a></li>
<li class="chapter" data-level="" data-path="elementary-data-types.html"><a href="elementary-data-types.html#booleans"><i class="fa fa-check"></i>Booleans</a></li>
<li class="chapter" data-level="" data-path="elementary-data-types.html"><a href="elementary-data-types.html#strings"><i class="fa fa-check"></i>Strings</a></li>
<li class="chapter" data-level="" data-path="elementary-data-types.html"><a href="elementary-data-types.html#immutability"><i class="fa fa-check"></i>Immutability</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="collections-and-looping-lists-and-for.html"><a href="collections-and-looping-lists-and-for.html"><i class="fa fa-check"></i><b>17</b> Collections and Looping: Lists and for</a>
<ul>
<li class="chapter" data-level="" data-path="collections-and-looping-lists-and-for.html"><a href="collections-and-looping-lists-and-for.html#tuples-immutable-lists"><i class="fa fa-check"></i>Tuples (Immutable Lists)</a></li>
<li class="chapter" data-level="" data-path="collections-and-looping-lists-and-for.html"><a href="collections-and-looping-lists-and-for.html#looping-with-for"><i class="fa fa-check"></i>Looping with for</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="file-input-and-output.html"><a href="file-input-and-output.html"><i class="fa fa-check"></i><b>18</b> File Input and Output</a>
<ul>
<li class="chapter" data-level="" data-path="file-input-and-output.html"><a href="file-input-and-output.html#writing-data"><i class="fa fa-check"></i>Writing Data</a></li>
<li class="chapter" data-level="" data-path="file-input-and-output.html"><a href="file-input-and-output.html#computing-a-mean"><i class="fa fa-check"></i>Computing a Mean</a></li>
<li class="chapter" data-level="" data-path="file-input-and-output.html"><a href="file-input-and-output.html#the-process-of-programming"><i class="fa fa-check"></i>The Process of Programming</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html"><i class="fa fa-check"></i><b>19</b> Conditional Control Flow</a>
<ul>
<li class="chapter" data-level="" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html#using-if-statements"><i class="fa fa-check"></i>Using If-Statements</a></li>
<li class="chapter" data-level="" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html#using-while-loops"><i class="fa fa-check"></i>Using While-Loops</a></li>
<li class="chapter" data-level="" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html#boolean-operators-and-connectives"><i class="fa fa-check"></i>Boolean Operators and Connectives</a></li>
<li class="chapter" data-level="" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html#logical-dangers"><i class="fa fa-check"></i>Logical Dangers</a></li>
<li class="chapter" data-level="" data-path="conditional-control-flow.html"><a href="conditional-control-flow.html#counting-stop-codons"><i class="fa fa-check"></i>Counting Stop Codons</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="python-functions.html"><a href="python-functions.html"><i class="fa fa-check"></i><b>20</b> Python Functions</a>
<ul>
<li class="chapter" data-level="" data-path="python-functions.html"><a href="python-functions.html#important-notes-about-functions"><i class="fa fa-check"></i>Important Notes about Functions</a></li>
<li class="chapter" data-level="" data-path="python-functions.html"><a href="python-functions.html#gc-content-over-sequences-in-a-file"><i class="fa fa-check"></i>GC Content over Sequences in a File</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="command-line-interfacing.html"><a href="command-line-interfacing.html"><i class="fa fa-check"></i><b>21</b> Command Line Interfacing</a>
<ul>
<li class="chapter" data-level="" data-path="command-line-interfacing.html"><a href="command-line-interfacing.html#standard-input-is-a-file-handle"><i class="fa fa-check"></i>Standard Input is a File Handle</a></li>
<li class="chapter" data-level="" data-path="command-line-interfacing.html"><a href="command-line-interfacing.html#standard-output-as-a-file-handle"><i class="fa fa-check"></i>Standard Output as a File Handle</a></li>
<li class="chapter" data-level="" data-path="command-line-interfacing.html"><a href="command-line-interfacing.html#command-line-parameters"><i class="fa fa-check"></i>Command Line Parameters</a></li>
<li class="chapter" data-level="" data-path="command-line-interfacing.html"><a href="command-line-interfacing.html#executing-shell-commands-within-python"><i class="fa fa-check"></i>Executing Shell Commands within Python</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="dictionaries.html"><a href="dictionaries.html"><i class="fa fa-check"></i><b>22</b> Dictionaries</a>
<ul>
<li class="chapter" data-level="" data-path="dictionaries.html"><a href="dictionaries.html#counting-gene-ontology-terms"><i class="fa fa-check"></i>Counting Gene Ontology Terms</a></li>
<li class="chapter" data-level="" data-path="dictionaries.html"><a href="dictionaries.html#extracting-all-lines-matching-a-set-of-ids"><i class="fa fa-check"></i>Extracting All Lines Matching a Set of IDs</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html"><i class="fa fa-check"></i><b>23</b> String Tips and Regular Expressions</a>
<ul>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#converting-a-string-into-a-list-of-single-character-strings"><i class="fa fa-check"></i>Converting a String into a List of Single-Character Strings</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#converting-a-list-of-strings-into-a-string"><i class="fa fa-check"></i>Converting a List of Strings into a String</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#reverse-a-list"><i class="fa fa-check"></i>Reverse a List</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#reverse-a-string"><i class="fa fa-check"></i>Reverse a String</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#simple-find-and-replace-in-a-string"><i class="fa fa-check"></i>Simple Find and Replace in a String</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#commands-versus-queries"><i class="fa fa-check"></i>Commands versus Queries</a></li>
<li class="chapter" data-level="23.0.1" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#regular-expressions-1"><i class="fa fa-check"></i><b>23.0.1</b> Regular Expressions</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#searching-for-a-pattern-in-a-string"><i class="fa fa-check"></i>Searching for a Pattern in a String</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#replace-a-pattern-in-a-string"><i class="fa fa-check"></i>Replace a Pattern in a String</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#split-a-string-into-a-list-of-strings-based-on-a-pattern"><i class="fa fa-check"></i>Split a String into a List of Strings Based on a Pattern</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#the-language-of-regular-expressions-in-python"><i class="fa fa-check"></i>The Language of Regular Expressions, in Python</a></li>
<li class="chapter" data-level="" data-path="string-tips-and-regular-expressions.html"><a href="string-tips-and-regular-expressions.html#counting-promoter-elements"><i class="fa fa-check"></i>Counting Promoter Elements</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="variables-and-scope.html"><a href="variables-and-scope.html"><i class="fa fa-check"></i><b>24</b> Variables and Scope</a></li>
<li class="chapter" data-level="25" data-path="variables-and-classes.html"><a href="variables-and-classes.html"><i class="fa fa-check"></i><b>25</b> Variables and Classes</a>
<ul>
<li class="chapter" data-level="" data-path="variables-and-classes.html"><a href="variables-and-classes.html#creating-new-classes"><i class="fa fa-check"></i>Creating New Classes</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="use-case-counting-snps.html"><a href="use-case-counting-snps.html"><i class="fa fa-check"></i><b>26</b> Use Case: Counting SNPs</a>
<ul>
<li class="chapter" data-level="" data-path="use-case-counting-snps.html"><a href="use-case-counting-snps.html#snp-class"><i class="fa fa-check"></i>SNP Class</a></li>
<li class="chapter" data-level="" data-path="use-case-counting-snps.html"><a href="use-case-counting-snps.html#chromosome-class"><i class="fa fa-check"></i>Chromosome Class</a></li>
<li class="chapter" data-level="" data-path="use-case-counting-snps.html"><a href="use-case-counting-snps.html#an-extension-searching-for-snp-dense-regions"><i class="fa fa-check"></i>An Extension: Searching for SNP-Dense Regions</a></li>
<li class="chapter" data-level="" data-path="use-case-counting-snps.html"><a href="use-case-counting-snps.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html"><i class="fa fa-check"></i><b>27</b> Application Programming Interfaces, Modules, Packages, Syntactic Sugar</a>
<ul>
<li class="chapter" data-level="" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html#modules"><i class="fa fa-check"></i>Modules</a></li>
<li class="chapter" data-level="" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html#creating-a-module"><i class="fa fa-check"></i>Creating a Module</a></li>
<li class="chapter" data-level="" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html#parsing-a-fasta-file"><i class="fa fa-check"></i>Parsing a FASTA File</a></li>
<li class="chapter" data-level="" data-path="application-programming-interfaces-modules-packages-syntactic-sugar.html"><a href="application-programming-interfaces-modules-packages-syntactic-sugar.html#syntactic-sugar"><i class="fa fa-check"></i>Syntactic Sugar</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html"><i class="fa fa-check"></i><b>28</b> Algorithms and Data Structures</a>
<ul>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#order-notation"><i class="fa fa-check"></i>Order Notation</a></li>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#data-structures"><i class="fa fa-check"></i>Data Structures</a></li>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#sorted-linked-lists"><i class="fa fa-check"></i>Sorted Linked Lists</a></li>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#linked-list-methods"><i class="fa fa-check"></i>Linked List Methods</a></li>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#divide-and-conquer"><i class="fa fa-check"></i>Divide and Conquer</a></li>
<li class="chapter" data-level="" data-path="algorithms-and-data-structures.html"><a href="algorithms-and-data-structures.html#back-to-sorting"><i class="fa fa-check"></i>Back to Sorting</a></li>
</ul></li>
<li class="part"><span><b>Part 3: Programming in R</b></span></li>
<li class="chapter" data-level="29" data-path="an-introduction.html"><a href="an-introduction.html"><i class="fa fa-check"></i><b>29</b> An Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#hello-world-2"><i class="fa fa-check"></i>Hello, World</a></li>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#librariespackages"><i class="fa fa-check"></i>Libraries/Packages</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="variables-and-data.html"><a href="variables-and-data.html"><i class="fa fa-check"></i><b>30</b> Variables and Data</a>
<ul>
<li class="chapter" data-level="" data-path="variables-and-data.html"><a href="variables-and-data.html#numerics-integers-characters-and-logicals"><i class="fa fa-check"></i>Numerics, Integers, Characters, and Logicals</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>31</b> Vectors</a>
<ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#no-naked-data-vectors-have-a-class"><i class="fa fa-check"></i>No “Naked Data”: Vectors Have (a) Class</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#subsetting-vectors-selective-replacement"><i class="fa fa-check"></i>Subsetting Vectors, Selective Replacement</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#vectorized-operations-na-values"><i class="fa fa-check"></i>Vectorized Operations, <code>NA</code> Values</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#vector-recycling"><i class="fa fa-check"></i>Vector Recycling</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#common-vector-functions"><i class="fa fa-check"></i>Common Vector Functions</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#generating-random-data"><i class="fa fa-check"></i>Generating Random Data</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#reading-and-writing-tabular-data-wrapping-long-lines"><i class="fa fa-check"></i>Reading and Writing Tabular Data, Wrapping Long Lines</a></li>
</ul></li>
<li class="chapter" data-level="32" data-path="r-functions.html"><a href="r-functions.html"><i class="fa fa-check"></i><b>32</b> R Functions</a>
<ul>
<li class="chapter" data-level="" data-path="r-functions.html"><a href="r-functions.html#variables-and-scope-1"><i class="fa fa-check"></i>Variables and Scope</a></li>
<li class="chapter" data-level="" data-path="r-functions.html"><a href="r-functions.html#getting-help"><i class="fa fa-check"></i>Getting Help</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="lists-and-attributes.html"><a href="lists-and-attributes.html"><i class="fa fa-check"></i><b>33</b> Lists and Attributes</a>
<ul>
<li class="chapter" data-level="" data-path="lists-and-attributes.html"><a href="lists-and-attributes.html#named-lists-lists-within-lists"><i class="fa fa-check"></i>Named Lists, Lists within Lists</a></li>
<li class="chapter" data-level="33.0.1" data-path="lists-and-attributes.html"><a href="lists-and-attributes.html#attributes-removing-elements-list-structure"><i class="fa fa-check"></i><b>33.0.1</b> Attributes, Removing Elements, List Structure</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>34</b> Data Frames</a>
<ul>
<li class="chapter" data-level="" data-path="data-frames.html"><a href="data-frames.html#data-frame-operations"><i class="fa fa-check"></i>Data Frame Operations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Primer for Computational Biology (2nd Edition)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-functions" class="section level1 hasAnchor" number="32">
<h1><span class="header-section-number">Chapter 32</span> R Functions<a href="r-functions.html#r-functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>While we could continue to cover R’s unique and powerful vector syntax, it’s time to have some fun and learn about functions. Functions in R are similar to their <a href="">Python counterparts</a>: they <em>encapsulate</em> a block of code, making it reusable as well as allowing us to consider the block in isolation of the rest of the program. As with functions in most languages, R functions consist of three main parts:</p>
<ol style="list-style-type: decimal">
<li><p>The input (parameters given to the function).</p></li>
<li><p>The code block that is to be executed using those parameters. In R, blocks are defined by a matching pair of curly brackets, <code>{</code> and <code>}</code>.</p></li>
<li><p>The output of the function, called the return value. This may be optional if the function “does something” (like <code>print()</code>) rather than “returns something.”</p></li>
</ol>
<p>Let’s consider the problem of determining which elements of two numeric vectors, say vec1 and vec2, are close enough to equal to call them equal. As mentioned in chapter 27, “<a href="">Variables and Data</a>,” the standard way to check if all elements in two equal-length vectors are approximately pairwise-equal is to use <code>isTRUE(all.equal(vec1, vec2))</code>, which returns a single <code>TRUE</code> if this is the case and a single <code>FALSE</code> if not.</p>
<pre id=part3-04-isTRUEalldotequal
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
vec1 <- c(1/5, 0.2, 0.2 * 0.2 / 0.2)
vec2 <- c(1/5, 1/5, 1/5)

eq <- isTRUE(all.equal(vec1, vec2))
print(eq)                                  # [1] TRUE
</code></pre>
<p>But perhaps we’d rather like a logical vector indicating <em>which</em> elements are approximately equal. The most straightforward way to do this is by comparing the absolute difference between the elements with some small epsilon value.</p>
<pre id=part3-04-comp-epsilon
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
epsilon <- 0.00001
eq <- abs(vec1 - vec2) < epsilon
print(eq)                                  # [1] TRUE FALSE
</code></pre>
<p>As a review of the last chapter, what is happening here is that the <code>-</code> operation is vectorized over the left- and right-hand sides, producing a vector (using <a href="">vector recycling</a> if one of the two were shorter, which not the case here; see <a href="">chapter 28</a>), as is the <code>abs()</code> function, which takes a vector and returns a vector of absolute values. Similarly, the <code>&lt;</code> operator is vectorized, and because epsilon is a vector of length one, so it is compared to all elements of the result of <code>abs(vec1 - vec2)</code> using vector recycling, for the final result of a logical vector.</p>
<p>Because this sort of operation is something we might want to perform many times, we could write a function for it. In this case, we’ll call our function <code>equalish()</code>; here’s the R code for defining and running such a function.</p>
<pre id=part3-04-equalish-def-1
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
# Compares elements of a and b; 
# returns TRUE for each within epsilon
equalish <- function(a, b, epsilon = 0.00001) {
  result <- abs(a - b) < epsilon
  return(result)
}       


vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
eq <- equalish(vec1, vec2)
print(eq)                         # [1] TRUE FALSE
</code></pre>
<p>There are many things to note here. First, when defining a function, we define the parameters it can take. Parameters in R functions have a <em>position</em> (<code>a</code> is at position 1, <code>b</code> is at position 2, and <code>epsilon</code> is at position 3) and a <em>name</em> (<code>a</code>, <code>b</code>, and <code>epsilon</code>). Some parameters may have a default value: the value they should have if unspecified otherwise, while other parameters may be required: the user of the function must specify them. Default values are assigned within the parameter list with <code>=</code> (not <code>&lt;-</code> as in standard variable assignment).</p>
<p>The block that defines the operations performed by the function is enclosed in curly brackets, usually with the opening bracket on the same line as the function/parameter list definition, and the closing bracket on its own line. We’ve indented the lines that belong to the function block by two spaces (an R convention). Although not required, this is a good idea, as it makes code much more readable. The value that is returned by the function is specified with a call to a special <code>return()</code> function—functions can only return one value, though it might be something sophisticated like a vector or data frame.<a href="#fn103" class="footnote-ref" id="fnref103"><sup>103</sup></a></p>
<p>After a function has been defined, it can be called, as in <code>eq &lt;- equalish(vec1, vec2)</code>. The variable names associated with the data outside the function (in this case <code>vec1</code> and <code>vec2</code>) needn’t match the parameter names inside the function (<code>a</code> and <code>b</code>). This is an important point to which we will return.</p>
<p>In the call above, we let the <code>epsilon</code> parameter take its default value of <code>0.00001</code>. We could alternatively use a stricter comparison.</p>
<pre id=part3-04-equalish-change-epsilon
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
eq <- equalish(vec1, vec2, 0.000000000001)
print(eq)                                  # [1] FALSE FALSE
</code></pre>
<p>In R, arguments to functions may be specified by position (as in the example above), by name, or by a combination.</p>
<pre id=part3-04-equalish-alternate-calls
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
# by name:
eq <- equalish(a = vec1, b = vec2, epsilon = 0.000000000001)
# mix of position and name:
eq <- equalish(vec1, vec2, epsilon = 0.000000000001)
</code></pre>
<p>Many R functions take a few required parameters and many nonrequired parameters with reasonable defaults; this calling scheme allows us to specify the required parameters as well as only those nonrequired ones that we wish to change.</p>
<p>In general, you should specify parameters by position first (if you want to specify any by position), then by name. Although the following calls will work, they’re quite confusing.</p>
<pre id=part3-04-equalish-alternate-calls-confusing
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
eq <- equalish(vec1, epsilon = 0.00000000001, vec2)       # confusing!
eq <- equalish(epsilon = 0.00000000001, vec2, a = vec1)   # confusing!
</code></pre>
<p>We frequently use default parameters to specify named parameters in functions called within the function we’re defining. Here is an example of a function that computes the difference in means of two vectors; it takes an optional <code>remove_NAs</code> parameter that defaults to <code>FALSE</code>. If this is specified as <code>TRUE</code>, the <code>na.rm</code> parameter in the calls to <code>mean()</code> is set to <code>TRUE</code> as well in the computation.</p>
<pre id=part3-04-diff-mean-def
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
# returns the difference between mean(vec1)
# and mean(vec2)
diff_mean <- function(vec1, vec2, remove_NAs = FALSE) {
  m1 <- mean(vec1, na.rm = remove_NAs) 
  m2 <- mean(vec2, na.rm = remove_NAs)
  return(m1 - m2)
}
</code></pre>
<p>For continuity with other R functions, it might have made better sense to call the parameter <code>na.rm</code>; in this case, we would modify the computation lines to read like <code>m1 &lt;- mean(vec1, na.rm = na.rm)</code>. Although it may seem that the R interpreter would be confused by the duplicate variable names, the fact that the <code>mean()</code> parameter <code>na.rm</code> happens to have the same name as the variable being passed will cause no trouble.</p>
<div id="variables-and-scope-1" class="section level3 unnumbered hasAnchor">
<h3>Variables and Scope<a href="r-functions.html#variables-and-scope-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s run a quick experiment. Inside our function, the variable <code>result</code> has been assigned with the line <code>result &lt;- abs(a - b) &lt; epsilon</code>. After we run the function, is it possible to access that variable by printing it?</p>
<pre id=part3-04-experiment-1
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
eq <- equalish(vec1, vec2)                 # TRUE FALSE
print(result)
</code></pre>
<p>Printing doesn’t work!</p>
<pre id=part3-04-experiment-1-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
Error in print(result) : object 'result' not found
Execution halted
</code></pre>
<p>This variable doesn’t print because, as in most languages, variables assigned within functions have a <a href="">scope</a> <em>local</em> to that function block. (A variable’s scope is the context in which it can be accessed.) The same goes for the parameter variables—we would have no more success with <code>print(a)</code>, <code>print(b)</code>, or <code>print(epsilon)</code> outside of the function.</p>
<p>One of the best features of these <a href="">local variables</a> is that they are independent of any variables that might already exist. For example, the function creates a variable called <code>result</code> (which we now know is a local variable scoped to the function block). What if, outside of our function, we also had a <code>result</code> variable being used for an entirely different purpose? Would the function overwrite its contents?</p>
<pre id=part3-04-experiment-2
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
result <- "Success"
vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
eq <- equalish(vec1, vec2)                 # TRUE FALSE
print(result)
</code></pre>
<p>True to the independence of the local <code>result</code> variable inside the function, the contents of the external result are not overwritten.</p>
<pre id=part3-04-experiment-2-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1] "Success"
</code></pre>
<p>This feature of how variables work within functions might seem somewhat strange, but the upshot is important: functions can be <em>fully encapsulated</em>. If they are designed correctly, their usage cannot affect the code context in which they are used (the only way standard R functions can affect the “outside world” is to return some value). Functions that have this property and always return the same value given the same inputs (e.g., have no random component) are called “pure.” They can be treated as abstract black boxes and designed in isolation of the code that will use them, and the code that uses them can be designed without consideration of the internals of functions it calls. This type of design dramatically reduces the cognitive load for the programmer.</p>
<p>Now, let’s try the reverse experiment: if a variable is defined outside of the function (before it is called), can it be accessed from within the function block definition?</p>
<pre id=part3-04-experiment-3
     class="language-r
            line-numbers
            linkable-line-numbers"
     data-line=3,7>
<code>
equalish <- function(a, b, epsilon = 0.00001) {
  result <- abs(a - b) < epsilon
  print(testvar)
  return(result)
}

testvar <- "Contents of testvar"
vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
eq <- equalish(vec1, vec2)  # TRUE FALSE   
</code></pre>
<p>The lack of error in the output indicates that yes, the function block can access such external variables:</p>
<pre id=part3-04-experiment-3-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1] "Contents of testvar"
</code></pre>
<p>This means that it is possible to write functions that take no parameters and simply access the external variables they will need for computation.</p>
<pre id=part3-04-no-args-function
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
equalish <- function() {
  result <- abs(vec1 - vec2) < epsilon
  return(result)
}

vec1 <- c(4.00000001, 6)
vec2 <- c(4, 2)
epsilon <- 0.00001
eq <- equalish()            # TRUE FALSE
</code></pre>
<p>But writing such functions is fairly bad practice. Why? Because although the function still cannot affect the external environment, it is now quite dependent on the state of the external environment in which it is called. The function will only work if external variables called <code>vec1</code>, <code>vec2</code>, and <code>epsilon</code> happen to exist and have the right types of data when the function is called. Consider this: the former version of the function could be copied and pasted into an entirely different program and still be guaranteed to work (because the <code>a</code> and <code>b</code> parameters are required local variables, but that’s not the case here.</p>
<p>The same four “rules” for designing functions in Python apply to R:</p>
<ol style="list-style-type: decimal">
<li><p>Functions should only access <a href="">local variables</a> that have been assigned within the function block, or have been passed as parameters (either required or with defaults).</p></li>
<li><p>Document the use of each function with comments. What parameters are taken, and what types should they be? Do the parameters need to conform to any specification, or are there any caveats to using the function? Also, what is returned?</p></li>
<li><p>Functions shouldn’t be “too long.” This is subjective and context dependent, but most programmers are uncomfortable with functions that are more than one page long in their editor window. The idea is that a function encapsulates a single, small, reusable idea. If you do find yourself writing a function that is hard to read and understand, consider breaking it into two functions that need to be called in sequence, or a short function that calls another short function.</p></li>
<li><p>Write lots of functions! Even if a block of code is only going to be called once, it’s ok to make a function out of it (if it encapsulates some idea or well-separable block). After all, you never know if you might need to use it again, and just the act of encapsulating the code helps you ensure its correctness and forget about it when working on the rest of your program.</p></li>
</ol>
<div id="argument-passing-and-variable-semantics" class="section level4 unnumbered hasAnchor callout-box">
<h4>Argument Passing and Variable Semantics<a href="r-functions.html#argument-passing-and-variable-semantics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>So far, the differences we’ve seen between Python and R have mostly been in R’s emphasis on vectorized operations. In later chapters, we’ll also see that R emphasizes the creative use of functions more strongly than does Python (which should at the very least be a good reason to study them well).</p>
<p>There is another dramatic difference between these two languages, having to do with variables and their relationship to data. This is probably easiest to see with a couple of similar code examples. First, here’s some Python code that declares a list of numbers <code>nums</code>, creates a new variable based on the original called <code>numsb</code>, modifies the first element of <code>numsb</code>, and then prints both.</p>
<pre id=part3-04-vars-python-1
     class="language-python
            line-numbers
            linkable-line-numbers">
<code>
nums = [1, 2, 3, 4, 5]
numsb = nums
numsb[0] = 1000
print(nums)
print(numsb)
</code></pre>
<p>The output indicates that <code>nums</code> and <code>numsb</code> are both variables (or “names,” in Python parlance) for the same underlying data.</p>
<pre id=part3-04-vars-python-1-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1000, 2, 3, 4, 5]
[1000, 2, 3, 4, 5]
</code></pre>
<p>Corresponding R code and output reveals that R handles variables very differently:</p>
<pre id=part3-04-vars-r-1
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
nums <- c(1, 2, 3, 4, 5)
numsb <- nums
numsb[1] <- 1000
print(nums)
print(numsb)
</code></pre>
<pre id=part3-04-vars-r-1-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1] 1 2 3 4 5
[1] 1000    2    3    4    5
</code></pre>
<p>While in Python it’s common for the same underlying data to be referenced by multiple variables, in R, unique variables are almost always associated with unique data. Often these semantics are emphasized in the context of local variables for functions. Here’s the same thing, but the operation is mediated by a function call. First, the Python version and output:</p>
<pre id=part3-04-vars-python-2
     class="language-python
            line-numbers
            linkable-line-numbers">
<code>
def testfunc(param):
    param[0] = 1000
    return param

nums = [1, 2, 3, 4, 5]
numsb = testfunc(nums)
print(nums)
print(numsb)
</code></pre>
<pre id=part3-04-vars-python-2-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1000, 2, 3, 4, 5]
[1000, 2, 3, 4, 5]
</code></pre>
<p>And now the R version and output:</p>
<pre id=part3-04-vars-r-2
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
testfunc <- function(param) {
  param[1] <- 1000
  return(param)
}

nums <- c(1, 2, 3, 4, 5)
numsb <- testfunc(nums)
print(nums)
print(numsb)
</code></pre>
<pre id=part3-04-vars-r-2-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
[1] 1 2 3 4 5
[1] 1000    2    3    4    5
</code></pre>
<p>In the Python code, the <code>param</code> local variable is a new variable for the same underlying data, whereas in the R code the local <code>param</code> variable is a new variable for new underlying data. These two paradigms are found in a wide variety of languages; the latter is known as “pass-by-value,” though one could think of it as “pass-by-copy.” This doesn’t mean that R always creates a copy–it uses a “copy-on-write” strategy behind the scenes to avoid excess work. As for the former, the Python documentation refers to it as “pass-by-assignment,” and the effect is similar to “pass-by-reference.” (The term “pass-by-reference” has a very narrow technical definition, but is often used as a catch-all for this type of behavior.)</p>
<p>There are advantages and disadvantages to both strategies. The somewhat more difficult scheme used by Python is both speedier and allows for more easy implementations of some sophisticated algorithms (like the structures covered in chapter 25, “<a href="">Algorithms and Data Structures</a>”). The pass-by-value scheme, on the other hand, can be easier to code with, because functions that follow rule 1 above can’t surreptitiously modify data: they are “side effect free.”</p>
</div>
</div>
<div id="getting-help" class="section level3 unnumbered hasAnchor">
<h3>Getting Help<a href="r-functions.html#getting-help" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The R interpreter comes with extensive documentation for all of the functions that are built-in. Now that we know how to write functions, reading this documentation will be easy.</p>
<p>The help page for a particular function can be accessed by running <code>help("function_name")</code> in the interactive console, as in <code>help("t.test")</code> for help with the <code>t.test()</code> function.</p>
<pre id=part3-04-vars-help-ttest
     class="language-r
            line-numbers
            linkable-line-numbers">
<code>
> help("t.test")
</code></pre>
<p>Alternatively, if the function name contains no special characters, we can use the shorthand <code>?function_name</code>, as in <code>?t.test</code>. The help is provided in an interactive window in which you can use the arrow keys to scroll up and down.</p>
<pre id=part3-04-vars-help-ttest-out
     class="language-txt
            line-numbers
            linkable-line-numbers">
<code>
t.test                  package:stats                  R Documentation

<u>Student's t-Test</u>

<u>Description:</u>

     Performs one and two sample t-tests on vectors of data.

<u>Usage:</u>

     t.test(x, ...)

     ## Default S3 method:
     t.test(x, y = NULL,
            alternative = c("two.sided", "less", "greater"),
            mu = 0, paired = FALSE, var.equal = FALSE,
            conf.level = 0.95, ...)

     ## S3 method for class 'formula'
     t.test(formula, data, subset, na.action, ...)

<u>Arguments:</u>

       x: a (non-empty) numeric vector of data values.

       y: an optional (non-empty) numeric vector of data values.
...
</code></pre>
<p>The help pages generally have the following sections, and there may be others:</p>
<ul>
<li><em>Description</em>: Short description of the function.</li>
<li><em>Usage</em>: An example of how the function should be called, usually listing the most important parameters; parameters with defaults are shown with an equal sign.</li>
<li><em>Arguments</em>: What each parameter accepted by the function does.</li>
<li><em>Details</em>: Notes about the function and caveats to be aware of when using the function.</li>
<li><em>Value</em>: What is returned by the function.</li>
<li><em>References</em>: Any pertinent journal article or book citations. These are particularly useful for complex statistical functions.</li>
<li><em>Examples</em>: Example code using the function. Unfortunately, many examples are written for those who are familiar with the basics of the function, and illustrate more complex usage.</li>
<li><em>See Also</em>: Other related functions that a user might find interesting.</li>
</ul>
<p>If a function belongs to a package (such as <code>str_split()</code> in the <code>stringr</code> package), one can either load the package first (with <code>library(stringr)</code>) and access the help for the function as usual (<code>help("str_split")</code>), or specify the package directly, as in <code>help("str_split", package = "stringr")</code>. An overview help page for all functions in the package can be accessed with <code>help(package = "stringr")</code>.</p>
<p>Finally, in the interactive window, using <code>help.search("average")</code> will search the documentation for all functions mentioning the term “average”—the shortcut for this is <code>??average</code>.</p>
<div id="exercises-32" class="section level4 unnumbered hasAnchor exercises">
<h4>Exercises<a href="r-functions.html#exercises-32" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p>We often wish to “normalize” a vector of numbers by first subtracting the mean from each number and then dividing each by the standard deviation of the numbers. Write a function called <code>normalize_mean_sd()</code> that takes such a vector and returns the normalized version. The function should work even if any values are <code>NA</code> (the normalized version of <code>NA</code> should simply be <code>NA</code>).</p></li>
<li><p>The <code>t.test()</code> function tests whether the means of two numeric vectors are unequal. There are multiple versions of <em>t</em>-tests: some assume that the variances of the input vectors are equal, and others do not make this assumption. By default, does <code>t.test()</code> assume equal variances? How can this behavior be changed?</p></li>
<li><p>Using the help documentation, generate a vector of 100 samples from a Poisson distribution with the lambda parameter (which controls the shape of the distribution) set to <code>2.0</code>.</p></li>
<li><p>The following function computes the difference in mean of two vectors, but breaks at least one of the “rules” for writing functions. Fix it so that it conforms. (Note that it is also lacking proper documentation.)</p>
<pre id=part3-04-exercise-fixcode
     class="language-r 
            line-numbers 
            linkable-line-numbers">
<code>
mean_diff <- function() {
  m1 <- mean(v1)
  m2 <- mean(v2)
  answer <- m1 - m2
  return(answer)
}
&nbsp;
sample1 <- rnorm(100, mean = 4, sd = 3)
sample2 <- rnorm(100, mean = 6, sd = 3)
v1 <- sample1
v2 <- sample2
&nbsp;
diff <- mean_diff()
print(diff)
</code></pre></li>
<li><p>The following code generates two random samples, and then computes and prints the difference in coefficient of variation for the samples (defined as the standard deviation divided by the mean). Explain how this code works, step by step, in terms of local variables, parameters, and returned values. What if immediately before <code>sample1 &lt;- rnorm(100, mean = 4, sd = 2)</code>, we had <code>result &lt;- "Test message."</code>, and after <code>print(answer)</code>, we had <code>print(result)</code>? What would be printed, and why?</p>
<pre id=part3-04-exercise-explain
     class="language-r 
            line-numbers 
            linkable-line-numbers">
 <code>
## given two numeric vectors a and b,
## returns the difference in coefficient of 
## variation (sd over mean) NAs are ignored.
diff_cov <- function(a, b) {
  cova <- coeff_of_var(a)
  covb <- coeff_of_var(b)
  result <- cova - covb
  return(result)
}
&nbsp;
## given an numeric vector, returns
## the coefficient of variation (sd over mean)
## NAs are ignored
coeff_of_var <- function(a) {
  result <- sd(a, na.rm = TRUE) / mean(a, na.rm = TRUE)
  return(result)
}
&nbsp;
sample1 <- rnorm(100, mean = 4, sd = 2)
sample2 <- rnorm(100, mean = 8, sd = 2.5)
answer <- diff_cov(sample1, sample2)
print(answer)
 </code></pre></li>
</ol>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="103">
<li id="fn103"><p>Any variable that is simply stated (without assignment) in a function will be returned. So instead of <code>return(result)</code>, we could have simply said <code>result</code>. Some R programmers prefer this syntax; for this text, however, we’ll stick to using the more explicit <code>return()</code>. This also helps differentiate between such “returnless returns” and “printless prints” (see the footnote in Chapter 27, <a href="">Variables and Data</a>).<a href="r-functions.html#fnref103" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lists-and-attributes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/oneilsh/apcb_bookdown/edit/master/part3-04-r-functions.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": {},
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
